# Employee SQL Assistant (LLM + SQLite + Streamlit)

This project is an AI-powered SQL assistant that allows users to ask natural-language questions about an employee database.  
The system automatically converts the question into an SQL query using Gemini, executes it on SQLite, displays the results, and provides a detailed explanation of the query â€” all inside a Streamlit interface.

---

## ğŸš€ Features

âœ… Convert English â†’ SQL query  
âœ… Executes SQL on SQLite DB  
âœ… Shows SQL + Results + Explanation side-by-side  
âœ… Streamlit UI for interaction  
âœ… Example question suggestions  
âœ… Uses Gemini for query generation + explanation  

---

## ğŸ—ï¸ Tech Stack

| Component | Technology |
|----------|------------|
| LLM | Google Gemini |
| UI | Streamlit |
| Language | Python |
| Database | SQLite |
| Data Handling | Pandas |
| Env Management | dotenv |

---

# âœ… Project Overview

This project helps users interact with a database **without learning SQL**.

âœ… Just type questions like:
> "Who earns more than 60,000?"  
> "Show employees from Mumbai."  
> "Count employees working as Data Analysts."

The system will:
1) Convert question â†’ SQL  
2) Execute SQL on SQLite  
3) Display results  
4) Explain SQL step-by-step  

So even someone who doesn't know SQL can query databases in seconds.

---

# âœ… File-Level Explanation

## âœ… 1) `sql_import.py` â€” âœ… Database Builder

This script loads all files from the `/data/` folder and automatically creates a SQLite database.

### ğŸ“Œ What it does
âœ” Reads CSV/XLSX files  
âœ” Converts each file â†’ table  
âœ” Creates `Employee_Details.DB`  
âœ” Table name = file name  

### ğŸ› ï¸ Steps performed

1ï¸âƒ£ Connects to database  
2ï¸âƒ£ Scans `/data/` folder  
3ï¸âƒ£ Loads each file into Pandas  
4ï¸âƒ£ Saves it to SQLite  
5ï¸âƒ£ Prints table creation success  

### ğŸ“Œ Example
`employee_details.csv` â†’ creates table `employee_details`

---

## âœ… 2) `app.py` â€” âœ… Main Application (UI + LLM + SQL Execution)

This is the main Streamlit application responsible for the user interface and LLM + SQL execution.

### ğŸ“Œ Responsibilities
âœ” Accepts natural language questions  
âœ” Uses Gemini â†’ SQL  
âœ” Executes SQL query  
âœ” Displays:
- SQL query  
- Query results  
- Explanation of SQL  

### ğŸ” Main components

| Component | Role |
|-----------|------|
| `get_gemini_sql()` | Converts English â†’ SQL |
| `read_sql_query()` | Executes SQL + returns data |
| `explain_sql_query()` | Explains SQL logic |
| Prompt | Guides Gemini response |
| Streamlit UI | User interface |

---

### ğŸ“Œ Function Details

âœ… **get_gemini_sql()**  
- Sends prompt + question to Gemini  
- Extracts only SQL  
- Returns valid SELECT query  

âœ… **read_sql_query()**  
- Runs SQL using sqlite3  
- Returns rows + column headers  
- Handles errors  

âœ… **explain_sql_query()**  
- Asks Gemini to explain SQL in simple English  

âœ… **Streamlit UI**
- Text field  
- Example questions  
- RUN button  
- Results + explanation side-by-side  

---

### ğŸ§  Prompt Logic

The prompt instructs Gemini to:

âœ” Convert natural language â†’ SQL  
âœ” Use SQLite syntax only  
âœ” Work on `employee_details` table  
âœ” Use correct column names  
âœ” Avoid semicolons + backticks  
âœ” Use LIKE for text matching  

Supports synonyms:
```
employees | staff | employee | workers
```
â†’ All refer to `employee_details` table.

---

# ğŸ“‚ Project Structure

```
project/
â”‚
â”œâ”€â”€ app.py                 # Main Streamlit app
â”œâ”€â”€ sql_import.py          # Convert CSV â†’ SQLite
â”œâ”€â”€ Employee_Details.DB    # SQLite database
â”œâ”€â”€ data/                  # Input files
â”‚   â””â”€â”€ employee_details.csv
â”œâ”€â”€ .env                   # API key
â””â”€â”€ README.md              # Docs
```

---

# ğŸ—„ Database

### ğŸ“ Database File
```
Employee_Details.DB
```

### ğŸ“Œ Table
```
employee_details
```

### ğŸ“Œ Columns
```
employee_id
name
age
gender
role
department
salary
join_date
email
phone
city
state
performance_rating
experience_years
employment_type
work_mode
```

---

# â–¶ï¸ Workflow

```
User â†’ Question â†’ Gemini â†’ SQL â†’ SQLite â†’ Result â†’ Explanation
```

---

# ğŸ“¦ Installation

âœ… 1) Clone repo
```bash
git clone https://github.com/chaudharivaibhav471
cd sql_project
```


# ğŸ§ª Sample Questions

```
List all employees.
Show only Software Developers.
Who earns more than 60,000?
Count of Data Analysts.
Highest salary employee.
Provide average salary by department.
Show employees from Mumbai.
Employees who joined after 2022.
Employees with rating > 4.
Count employees with experience > 5 years.
```

---

# âœ… Future Enhancements

- Multi-table joins
- Data charts
- Export results as CSV
- Query history
- Login system
- Insert/update/delete support

---
# ğŸ‘¨â€ğŸ’» Author

Name :- **Vaibhav Chaudhari**
Mob No:- 7057857025
Emailid :- chaudharivaibhav471@gmail.com
